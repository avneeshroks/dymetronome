(this.webpackJsonpdymetronome=this.webpackJsonpdymetronome||[]).push([[0],{10:function(t,e,n){t.exports=n(17)},15:function(t,e,n){},16:function(t,e,n){},17:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),a=n(8),c=n.n(a),l=(n(15),n(16),n(3)),r=n(4),u=n(2),s=n(6),h=n(5),m=n(9),d=n(1),k=function(t){Object(s.a)(n,t);var e=Object(h.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this)).plan=t,i.tickTimeouts=[],i}return Object(r.a)(n,[{key:"start",value:function(t){var e=this;Object(m.a)(Object(d.a)(n.prototype),"start",this).call(this);var i=this.audioCtx.currentTime;this.plan.forEach((function(n,o){console.log("scheduling for segment : ".concat(o+1,". With tempo : ").concat(n.tempo," and Ticks : ").concat(n.ticks,"."));for(var a=60/n.tempo,c=function(o){e.clickAtTime(i);var c=i;e.tickTimeouts.push(setTimeout((function(){return t(c,n.tempo)}),1e3*i)),i+=a},l=0;l<n.ticks;l++)c()}))}},{key:"stopM",value:function(t){this.stop(t),this.tickTimeouts.forEach((function(t){clearTimeout(t)})),this.tickTimeouts=[]}}]),n}(function(){function t(){Object(l.a)(this,t),this.playing=!1,this.audioCtx=null,this.tick=null,this.tickVolume=null,this.soundHz=1e3}return Object(r.a)(t,[{key:"initAudio",value:function(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.tick=this.audioCtx.createOscillator(),this.tickVolume=this.audioCtx.createGain(),this.tick.type="sine",this.tick.frequency.value=this.soundHz,this.tickVolume.gain.value=0,this.tick.connect(this.tickVolume),this.tickVolume.connect(this.audioCtx.destination),this.tick.start(0)}},{key:"click",value:function(t){var e=this.audioCtx.currentTime;this.clickAtTime(e),t&&t(e)}},{key:"clickAtTime",value:function(t){this.tickVolume.gain.cancelScheduledValues(t),this.tickVolume.gain.setValueAtTime(0,t),this.tickVolume.gain.linearRampToValueAtTime(1,t+.001),this.tickVolume.gain.linearRampToValueAtTime(0,t+.001+.01)}},{key:"start",value:function(t){this.playing&&this.stop(),this.playing=!0,this.initAudio()}},{key:"stop",value:function(t){this.tick.stop(),this.playing=!1,this.audioCtx=null,this.tickVolume.gain.value=0}}]),t}()),p=function(t){Object(s.a)(n,t);var e=Object(h.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).currentTempo=null,i.plan=i.formatPlan(t.plan),i.handleMetronomeStartClick=i.handleMetronomeStartClick.bind(Object(u.a)(i)),i.handleMetronomeStopClick=i.handleMetronomeStopClick.bind(Object(u.a)(i)),i.handleTick=i.handleTick.bind(Object(u.a)(i)),i.handleStop=i.handleStop.bind(Object(u.a)(i)),i}return Object(r.a)(n,[{key:"formatPlan",value:function(t){return t.map((function(t){return t.ticks=t.tempo*t.duration,t})),t}},{key:"handleMetronomeStartClick",value:function(t){this.metronome=new k(this.plan),this.metronome.start(this.handleTick),this.setState({})}},{key:"handleMetronomeStopClick",value:function(t){this.metronome.stopM(this.handleStop),this.metronome=null,this.setState({})}},{key:"handleTick",value:function(t,e){console.log("tick @ ".concat(t)),this.currentTempo=e,this.setState({})}},{key:"handleStop",value:function(t){console.log("Metronome Stopped")}},{key:"render",value:function(){var t=this.metronome&&this.metronome.playing&&this.currentTempo?this.currentTempo:null;return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("button",{onClick:this.handleMetronomeStartClick},"Start"),o.a.createElement("button",{onClick:this.handleMetronomeStopClick},"Stop")),o.a.createElement("div",null,t&&o.a.createElement("div",null,"Currently playing @ : ".concat(this.currentTempo," Bpm..."))))}}]),n}(o.a.Component);var f=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(p,{plan:[{tempo:40,duration:.1},{tempo:60,duration:.1},{tempo:80,duration:.1},{tempo:120,duration:.2},{tempo:210,duration:.2}]}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.cf6bd35c.chunk.js.map