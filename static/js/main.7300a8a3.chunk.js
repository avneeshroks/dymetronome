(this.webpackJsonpdymetronome=this.webpackJsonpdymetronome||[]).push([[0],{43:function(e,t,n){e.exports=n(58)},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(18),o=n.n(l),c=(n(48),n(38)),r=n(80),s=n(81),u=n(37),m=n.n(u),h=n(36),d=n.n(h),p=(n(49),n(79)),b=n(8),v=n(9),k=n(4),f=n(12),y=n(11),E=(n(50),n(78)),O=n(35),j=n.n(O),C=(n(51),n(82)),g=n(34),S=n.n(g),w=(n(52),function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).increment=a.increment.bind(Object(k.a)(a)),a.decrement=a.decrement.bind(Object(k.a)(a)),a.state={value:a.props.min?a.props.min:0},a}return Object(v.a)(n,[{key:"increment",value:function(){var e=this.props.max;"number"===typeof e&&this.value>=e||this.setState({value:this.value+1})}},{key:"decrement",value:function(){var e=this.props.min;"number"===typeof e&&this.value<=e||this.setState({value:this.value-1})}},{key:"render",value:function(){return i.a.createElement("div",{className:"input-number"},i.a.createElement("button",{type:"button",onClick:this.decrement},"\u2212"),i.a.createElement("span",null,this.value),i.a.createElement("button",{type:"button",onClick:this.increment},"+"))}},{key:"value",get:function(){return this.state.value}}]),n}(i.a.Component)),T=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).bpmValue=40,a.isBpmDisabled=!0,a.valuetext=a.valuetext.bind(Object(k.a)(a)),a.handleBpmSliderVauleChange=a.handleBpmSliderVauleChange.bind(Object(k.a)(a)),a.handleOnFocus=a.handleOnFocus.bind(Object(k.a)(a)),a.handleOnBlur=a.handleOnBlur.bind(Object(k.a)(a)),a}return Object(v.a)(n,[{key:"valuetext",value:function(e){return this.bpmValue=e,"".concat(e," Bpm")}},{key:"handleBpmSliderVauleChange",value:function(e){this.isBpmDisabled=!1,this.setState({})}},{key:"handleOnFocus",value:function(e){this.isBpmDisabled=!1,this.setState({})}},{key:"handleOnBlur",value:function(e){this.isBpmDisabled=!0,this.setState({})}},{key:"render",value:function(){return i.a.createElement("button",{className:"wrapperBtnForFocus",onFocus:this.handleOnFocus,onBlur:this.handleOnBlur},i.a.createElement("div",{className:"plannerRow"},i.a.createElement("div",{className:"plInputWrapper"},i.a.createElement(C.a,{defaultValue:40,getAriaValueText:this.valuetext,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:40,max:220,onChangeCommitted:this.handleBpmSliderVauleChange,disabled:this.isBpmDisabled})),i.a.createElement("div",{className:"plSubRowWarpper"},i.a.createElement("div",{className:"subRowItem bpmLabel"},"".concat(this.bpmValue," Bpm")),i.a.createElement("div",{className:"subRowItem timePicker"},i.a.createElement(w,{min:0,max:10})),i.a.createElement("div",{className:"subRowItem delPlanBtn"},i.a.createElement("span",null,i.a.createElement(S.a,null))))))}}]),n}(i.a.Component),B=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).planRows=[],a.handleAddRowClicked=a.handleAddRowClicked.bind(Object(k.a)(a)),a.planRows.push(i.a.createElement(T,{key:Math.random()})),a}return Object(v.a)(n,[{key:"handleAddRowClicked",value:function(e){this.planRows.push(i.a.createElement(T,{key:Math.random()})),this.setState({})}},{key:"render",value:function(){return i.a.createElement("div",{className:"plannerWrapper"},i.a.createElement("div",null,this.planRows),i.a.createElement(E.a,{color:"primary","aria-label":"add"},i.a.createElement(j.a,{onClick:this.handleAddRowClicked})))}}]),n}(i.a.Component),V=n(39),x=n(16),N=function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this)).plan=e,a.tickTimeouts=[],a}return Object(v.a)(n,[{key:"start",value:function(e,t){var a=this;Object(V.a)(Object(x.a)(n.prototype),"start",this).call(this);var i=this.audioCtx.currentTime;this.plan.forEach((function(t,n){console.log("scheduling for segment : ".concat(n+1,". With tempo : ").concat(t.tempo," and Ticks : ").concat(t.ticks,"."));for(var l=60/t.tempo,o=function(n){a.clickAtTime(i);var o=i;a.tickTimeouts.push(setTimeout((function(){return e(o,t.tempo)}),1e3*i)),i+=l},c=0;c<t.ticks;c++)o()})),console.log("registering end event."),this.tickTimeouts.push(setTimeout((function(){return t()}),1e3*i+10))}},{key:"stopM",value:function(e){this.stop(e),this.tickTimeouts.forEach((function(e){clearTimeout(e)})),this.tickTimeouts=[]}}]),n}(function(){function e(){Object(b.a)(this,e),this.playing=!1,this.audioCtx=null,this.tick=null,this.tickVolume=null,this.soundHz=1e3}return Object(v.a)(e,[{key:"initAudio",value:function(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.tick=this.audioCtx.createOscillator(),this.tickVolume=this.audioCtx.createGain(),this.tick.type="sine",this.tick.frequency.value=this.soundHz,this.tickVolume.gain.value=0,this.tick.connect(this.tickVolume),this.tickVolume.connect(this.audioCtx.destination),this.tick.start(0)}},{key:"click",value:function(e){var t=this.audioCtx.currentTime;this.clickAtTime(t),e&&e(t)}},{key:"clickAtTime",value:function(e){this.tickVolume.gain.cancelScheduledValues(e),this.tickVolume.gain.setValueAtTime(0,e),this.tickVolume.gain.linearRampToValueAtTime(1,e+.001),this.tickVolume.gain.linearRampToValueAtTime(0,e+.001+.01)}},{key:"start",value:function(e){this.playing&&this.stop(),this.playing=!0,this.initAudio()}},{key:"stop",value:function(e){this.tick.stop(),this.playing=!1,this.audioCtx=null,this.tickVolume.gain.value=0}}]),e}()),A=(n(57),function(e){Object(f.a)(n,e);var t=Object(y.a)(n);function n(e){var a;Object(b.a)(this,n),(a=t.call(this,e)).currentTempo=null;var i=a.getPlan();return a.plan=a.formatPlan(i),a.handleMetronomeStartClick=a.handleMetronomeStartClick.bind(Object(k.a)(a)),a.handleMetronomeStopClick=a.handleMetronomeStopClick.bind(Object(k.a)(a)),a.handleTick=a.handleTick.bind(Object(k.a)(a)),a.handleStop=a.handleStop.bind(Object(k.a)(a)),a.handlePlanSeqEnd=a.handlePlanSeqEnd.bind(Object(k.a)(a)),a}return Object(v.a)(n,[{key:"componentWillUnmount",value:function(){this.metronome.stopM(this.handleStop),this.metronome=null}},{key:"getPlan",value:function(){return[{tempo:40,duration:.1},{tempo:60,duration:.1},{tempo:80,duration:.1},{tempo:120,duration:.2},{tempo:210,duration:.2}]}},{key:"formatPlan",value:function(e){return e.map((function(e){return e.ticks=e.tempo*e.duration,e})),e}},{key:"handleMetronomeStartClick",value:function(e){this.metronome=new N(this.plan),this.metronome.start(this.handleTick,this.handlePlanSeqEnd),this.setState({})}},{key:"handleMetronomeStopClick",value:function(e){this.metronome.stopM(this.handleStop),this.metronome=null,this.setState({})}},{key:"handleTick",value:function(e,t){console.log("tick @ ".concat(e)),this.currentTempo=t,this.setState({})}},{key:"handleStop",value:function(e){console.log("Metronome Stopped")}},{key:"handlePlanSeqEnd",value:function(){this.metronome=null,this.setState({})}},{key:"render",value:function(){var e=this.metronome&&!!this.metronome.playing,t=e&&this.currentTempo?this.currentTempo:null;return i.a.createElement("div",{className:"mWrapper"},i.a.createElement("div",{className:"btnWrapper"},e?i.a.createElement("button",{className:"endBtn",onClick:this.handleMetronomeStopClick},i.a.createElement("span",{className:"btnText"},"Stop")):i.a.createElement("button",{className:"startBtn",onClick:this.handleMetronomeStartClick},i.a.createElement("span",{className:"btnText"},"Start"))),i.a.createElement("div",{className:"playingMsg"},t?i.a.createElement("div",null,"Currently playing @ : ".concat(this.currentTempo," Bpm...")):i.a.createElement("div",null,"It'll play as per plan selected. If not created yet then go to plan...")))}}]),n}(i.a.Component)),M=Object(p.a)({root:{width:"100%"}});var R=function(){var e=M(),t=i.a.useState(0),n=Object(c.a)(t,2),l=n[0],o=n[1];return Object(a.useEffect)((function(){return window.addEventListener("scroll",(function(){})),function(){window.removeEventListener("scroll",(function(){}))}}),[]),i.a.createElement("div",{className:"App"},0===l?i.a.createElement(B,null):i.a.createElement(A,null),i.a.createElement(r.a,{value:l,onChange:function(e,t){o(t)}.bind(this),showLabels:!0,className:e.root},i.a.createElement(s.a,{label:"Plan",icon:i.a.createElement(d.a,null)}),i.a.createElement(s.a,{label:"Play",icon:i.a.createElement(m.a,null)})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.7300a8a3.chunk.js.map