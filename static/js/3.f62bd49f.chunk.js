(this.webpackJsonpdymetronome=this.webpackJsonpdymetronome||[]).push([[3],{21:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var a=n(35),i=n(4),o=n(0),c=n.n(o),r=n(3),l=(n(5),n(1)),u=n(7),s=n(2);c.a.Component;c.a.Component;var m=function(t,e){return"function"===typeof t?t(e):t},h=function(t,e){return"string"===typeof t?Object(r.c)(t,null,null,e):t},f=function(t){return t},p=c.a.forwardRef;"undefined"===typeof p&&(p=f);var d=p((function(t,e){var n=t.innerRef,a=t.navigate,i=t.onClick,o=Object(u.a)(t,["innerRef","navigate","onClick"]),r=o.target,s=Object(l.a)({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||r&&"_self"!==r||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),a())}});return s.ref=f!==p&&e||n,c.a.createElement("a",s)}));var v=p((function(t,e){var n=t.component,i=void 0===n?d:n,o=t.replace,r=t.to,v=t.innerRef,k=Object(u.a)(t,["component","replace","to","innerRef"]);return c.a.createElement(a.d.Consumer,null,(function(t){t||Object(s.a)(!1);var n=t.history,a=h(m(r,t.location),t.location),u=a?n.createHref(a):"",d=Object(l.a)({},k,{href:u,navigate:function(){var e=m(r,t.location);(o?n.replace:n.push)(e)}});return f!==p?d.ref=e||v:d.innerRef=v,c.a.createElement(i,d)}))})),k=function(t){return t},y=c.a.forwardRef;"undefined"===typeof y&&(y=k);y((function(t,e){var n=t["aria-current"],i=void 0===n?"page":n,o=t.activeClassName,r=void 0===o?"active":o,f=t.activeStyle,p=t.className,d=t.exact,b=t.isActive,g=t.location,O=t.strict,j=t.style,C=t.to,T=t.innerRef,S=Object(u.a)(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return c.a.createElement(a.d.Consumer,null,(function(t){t||Object(s.a)(!1);var n=g||t.location,o=h(m(C,n),n),u=o.pathname,E=u&&u.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=E?Object(a.e)(n.pathname,{path:E,exact:d,strict:O}):null,x=!!(b?b(w,n):w),R=x?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}(p,r):p,V=x?Object(l.a)({},j,{},f):j,A=Object(l.a)({"aria-current":x&&i||null,className:R,style:V,to:o},S);return k!==y?A.ref=e||T:A.innerRef=T,c.a.createElement(v,A)}))}))},37:function(t,e,n){},39:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return p}));var a=n(10),i=n(11),o=n(16),c=n(14),r=n(13),l=n(0),u=n.n(l),s=n(6);function m(t,e,n){return(m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var a=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(s.a)(t)););return t}(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var h=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var i;return Object(a.a)(this,n),(i=e.call(this)).plan=t,i.tickTimeouts=[],i}return Object(i.a)(n,[{key:"start",value:function(t,e){var a=this;m(Object(s.a)(n.prototype),"start",this).call(this);var i=this.audioCtx.currentTime;this.plan.forEach((function(e,n){console.log("scheduling for segment : ".concat(n+1,". With tempo : ").concat(e.tempo," and Ticks : ").concat(e.ticks,"."));for(var o=60/e.tempo,c=function(n){a.clickAtTime(i);var c=i;a.tickTimeouts.push(setTimeout((function(){return t(c,e.tempo)}),1e3*i)),i+=o},r=0;r<e.ticks;r++)c()})),console.log("registering end event."),this.tickTimeouts.push(setTimeout((function(){return e()}),1e3*i+10))}},{key:"stopM",value:function(t){this.stop(t),this.tickTimeouts.forEach((function(t){clearTimeout(t)})),this.tickTimeouts=[]}}]),n}(function(){function t(){Object(a.a)(this,t),this.playing=!1,this.audioCtx=null,this.tick=null,this.tickVolume=null,this.soundHz=1e3}return Object(i.a)(t,[{key:"initAudio",value:function(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.tick=this.audioCtx.createOscillator(),this.tickVolume=this.audioCtx.createGain(),this.tick.type="sine",this.tick.frequency.value=this.soundHz,this.tickVolume.gain.value=0,this.tick.connect(this.tickVolume),this.tickVolume.connect(this.audioCtx.destination),this.tick.start(0)}},{key:"click",value:function(t){var e=this.audioCtx.currentTime;this.clickAtTime(e),t&&t(e)}},{key:"clickAtTime",value:function(t){this.tickVolume.gain.cancelScheduledValues(t),this.tickVolume.gain.setValueAtTime(0,t),this.tickVolume.gain.linearRampToValueAtTime(1,t+.001),this.tickVolume.gain.linearRampToValueAtTime(0,t+.001+.01)}},{key:"start",value:function(t){this.playing&&this.stop(),this.playing=!0,this.initAudio()}},{key:"stop",value:function(t){this.tick.stop(),this.playing=!1,this.audioCtx=null,this.tickVolume.gain.value=0}}]),t}()),f=(n(37),n(21)),p=function(t){Object(c.a)(n,t);var e=Object(r.a)(n);function n(t){var i;Object(a.a)(this,n),(i=e.call(this,t)).currentTempo=null;var c=i.getPlan();return i.plan=i.formatPlan(c),i.handleMetronomeStartClick=i.handleMetronomeStartClick.bind(Object(o.a)(i)),i.handleMetronomeStopClick=i.handleMetronomeStopClick.bind(Object(o.a)(i)),i.handleTick=i.handleTick.bind(Object(o.a)(i)),i.handleStop=i.handleStop.bind(Object(o.a)(i)),i.handlePlanSeqEnd=i.handlePlanSeqEnd.bind(Object(o.a)(i)),i}return Object(i.a)(n,[{key:"getPlan",value:function(){return[{tempo:40,duration:.1},{tempo:60,duration:.1},{tempo:80,duration:.1},{tempo:120,duration:.2},{tempo:210,duration:.2}]}},{key:"formatPlan",value:function(t){return t.map((function(t){return t.ticks=t.tempo*t.duration,t})),t}},{key:"handleMetronomeStartClick",value:function(t){this.metronome=new h(this.plan),this.metronome.start(this.handleTick,this.handlePlanSeqEnd),this.setState({})}},{key:"handleMetronomeStopClick",value:function(t){this.metronome.stopM(this.handleStop),this.metronome=null,this.setState({})}},{key:"handleTick",value:function(t,e){console.log("tick @ ".concat(t)),this.currentTempo=e,this.setState({})}},{key:"handleStop",value:function(t){console.log("Metronome Stopped")}},{key:"handlePlanSeqEnd",value:function(){this.metronome=null,this.setState({})}},{key:"render",value:function(){var t=this.metronome&&!!this.metronome.playing,e=t&&this.currentTempo?this.currentTempo:null;return u.a.createElement("div",{className:"mWrapper"},u.a.createElement("div",{className:"btnWrapper"},t?u.a.createElement("button",{className:"endBtn",onClick:this.handleMetronomeStopClick},u.a.createElement("span",{className:"btnText"},"Stop")):u.a.createElement("button",{className:"startBtn",onClick:this.handleMetronomeStartClick},u.a.createElement("span",{className:"btnText"},"Start"))),u.a.createElement("div",{className:"playingMsg"},e?u.a.createElement("div",null,"Currently playing @ : ".concat(this.currentTempo," Bpm...")):u.a.createElement("div",null,"It'll play as per plan selected. If not created yet then go to ",u.a.createElement(f.a,{to:"/"},"plan..."))))}}]),n}(u.a.Component)}}]);
//# sourceMappingURL=3.f62bd49f.chunk.js.map